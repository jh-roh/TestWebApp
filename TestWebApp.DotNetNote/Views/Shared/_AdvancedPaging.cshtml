@model PagerBase
@{
    string url = Model.Url;
    int RecordCount = Model.RecordCount;
    int PageSize = Model.PageSize;
    int PageCount = (RecordCount - 1) / PageSize + 1;
    int PageNumber = Model.PageNumber;
    int PagerButtonCount = Model.PagerButtonCount;

    bool SearchMode = Model.SearchMode;
    string SearchField = Model.SearchField;
    string SearchQuery = Model.SearchQuery;


}
<div class="page">


    @if(PageNumber == 1)
    {
        <a href="#">처음</a>
    }
    else
    {
        //검색 모드이면 추가적으로 SearchField와 SearchQuery를 전송함
        if (SearchMode)
        {
            <a href="/@url?Page=1&SerachField=@SearchField&SearchQuery=@SearchQuery">처음</a>
        }
        else
        {
            <a href="/@url?Page=1">처음</a>
        }
    }
    
    @if (PageNumber > PagerButtonCount)
    {
        if(SearchMode)
        {
            <a href="/@url?Page=@(((PageNumber - 1) / (int)PagerButtonCount) * PagerButtonCount)&SerachField=@SearchField&SearchQuery=@SearchQuery">이전</a>
        }
        else
        {
            <a href="/@url?Page=@(((PageNumber - 1) / (int)PagerButtonCount) * PagerButtonCount)">이전</a>
        }

        
    }

    @{
        int i = 0;
    }

    @for (i = (((PageNumber - 1) / (int)PagerButtonCount) * PagerButtonCount + 1) ; 
         i <= (((PageNumber - 1) / (int)PagerButtonCount + 1) * PagerButtonCount);
         i++)
    {
        if(i > PageCount)
        {
            break; // 페이지수보다 크면 종료
        }

        //현재 보고 있는 페이지면 링크 제거
        if(i == PageNumber)
        {
            <a href="#">@i </a>
        }
        else
        {

            if(SearchMode)
            {
                <a href="/@url?Page=@i&SerachField=@SearchField&SearchQuery=@SearchQuery">@i </a>
            }
            else
            {
                <a href="/@url?Page=@i">@i </a>
            }

            
        }
        
    }
         
    
    @if (i <= PageCount)
    {
        if(SearchMode)
        {
            <a href="/@url?Page=@i&SerachField=@SearchField&SearchQuery=@SearchQuery">다음</a>
        }
        else
        {
            <a href="/@url?Page=@i">다음</a>
        }
    }
    else
    {
         <a href="#">다음</a>
    }

    @if(i <= PageCount)
    {
        if (SearchMode)
        {
            <a href="/@url?Page=@PageCount&SerachField=@SearchField&SearchQuery=@SearchQuery">마지막</a>
        }
        else
        {

            <a href="/@url?Page=@PageCount">마지막</a>
        }

    }
    else
    {
        <a href="#">마지막</a>
    }

</div>

<hr />

현재 페이지 : @Model.PageNumber<br />
버튼 수 : @Model.PagerButtonCount<br />

